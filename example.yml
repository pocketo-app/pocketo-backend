# ./docker-compose.override.yml
services:
  any-service:
    # Never restart any contaners in development
    # The value 'no' must be quoted, so YML will evaluate it as string, not boolean
    restart: 'no'
    # Exposing ports to host must not be duplicated, unless the containers won't start
    ports:
      # Expose ports for app containers (each instance has different exposing port)
      # Cannot specify ports in docker-compose.yml because app-green is extended from app-blue
      # That causes duplicated ports mapping
      # Must override each one in docker-compose.override.yml
      - "${BLUE_HOST_PORT:?}:8080"
      - "${GREEN_HOST_PORT:?}:8080"
      # Expose port 5005 for app container debugging in development (just one instance)
      - '5005:5005'
      # Other containers (db, cache,...) can expose its default ports if needed in development
      - '5432:5432'
      - '6379:6379'
