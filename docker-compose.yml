# Don't store sensitive data in this file
# Use env vars in docker-compose.override.yml (ignored by Git) instead
version: '3.9'
services:
  app-blue:
    image: ${APP_IMAGE:?}
    container_name: pocketo-app-blue
    volumes:
      - './pocketo-data/app/logs:/workspace/logs/'
    depends_on:
      - db
      - cache
    environment:
      - RUN_VIA_DOCKER_COMPOSE=1
  app-green:
    extends:
      service: app-blue
    container_name: pocketo-app-green
  db:
    image: 'postgres:15-alpine'
    container_name: pocketo-db
    volumes:
      - './pocketo-data/db:/var/lib/postgresql/data/'
  cache:
    image: 'redis:7-alpine'
    container_name: pocketo-cache
    volumes:
      - './pocketo-data/cache:/data/'
